{% extends "outline.html" %}


{% block title %}
Base
{% endblock title %}

{% block content %}

<script>
  $(document).ready(function () {
    $('input[type="checkbox"]').change(function () {
      const clickedCheckbox = $(this); // Get the clicked checkbox element

      // Uncheck all other checkboxes except the clicked one
      $('input[type="checkbox"]').not(clickedCheckbox).prop('checked', false);

      const checkedValues = $('input[type="checkbox"]:checked').map(function () {
        if ($(this).is(':checked')) {
          return this.value;
        }
      }).get();
      window.open('/filtering?filters=' + checkedValues, '_blank');
    });
  });
</script>

<div class="container-fluid" style="height: 20%;">
  <div class="row">
    <div class="col-sm" style="color: red;">ΦΙΛΤΡΑ</div>
    <div class="col-sm">ΕΙΔΟΣ ΑΓΓΕΛΙΑΣ<br>
      <input type="checkbox" id="filters1" name="filters" value="στα" onclick="selectOnlyThis(this.id)">
      <label for="filters">στα</label><br>
      <input type="checkbox" id="filters2" name="filters" value="Car" onclick="selectOnlyThis(this.id)">
      <label for="vehicle2">Το χρειάζομαι</label><br>
      <input type="checkbox" id="filters3" name="filters" value="Boat" onclick="selectOnlyThis(this.id)">
      <label for="vehicle3">The Collectives είναι εξαιρετικές.</label>
    </div>
    <div class="col-sm">ΤΟΠΟΘΕΣΙΑ<br>
      <input type="checkbox" id="filters4" name="filters" value="περιοχη" onclick="selectOnlyThis(this.id)">
      <label for="filters">περιοχη</label><br>
      <input type="checkbox" id="filters5" name="filters" value="Car" onclick="selectOnlyThis(this.id)">
      <label for="vehicle2">Περιοχή(Επίπεδο 2)</label><br>
      <input type="checkbox" id="filters6" name="filters" value="Boat" onclick="selectOnlyThis(this.id)">
      <label for="vehicle3">Απόσταση(χιλιόμετρα)</label>
    </div>
    <div class="col-sm">ΧΡΟΝΟΣ<br>
      <input type="checkbox" id="filters7" name="filters7" value="Επικοινωνία" onclick="selectOnlyThis(this.id)">
      <label for="vehicle1"> Επικοινωνία </label><br>
      <input type="checkbox" id="filters8" name="filters8" value="Car" onclick="selectOnlyThis(this.id)">
      <label for="vehicle2"> 7 ημέρες </label><br>
      <input type="checkbox" id="filters9" name="filters9" value="Boat" onclick="selectOnlyThis(this.id)">
      <label for="vehicle3"> 1 μήνας </label>
    </div>
  </div>
</div>
{% if offers %}
{% for offer in offers.items %}
<div class="col col-md-4" style="padding: 40px;">

  {% if offer.offer_image and offer.offer_image != 'default_offer_image.jpg' %}
  <img src="{{ url_for('static', filename='images/offers_images/'+offer.offer_image) }}" alt=""
    class="img-responsive a_image" width="100%" height="300px">
  {% endif %}
  <div class="main-article-title">
    <a class="article_title" href="{{ url_for('full_offer', offer_id=offer.id) }}">{{ offer.offer_title | safe }}</a>
  </div>
  <small class="article_date">[{{ offer.date_created.strftime('%d-%m-%Y') }}]</small>
  <p class="main-article-partial-text">
    {{ offer.offer_body | truncate(100) | safe }}
  </p>
  <p class="">Από
    <span>
      <a class="author-name" href="{{ url_for('offers_by_author', author_id=offer.author.id) }}"> {{
        offer.author.username }}
        <img class="rounded-circle profile-image" alt="{{ offer.author.username }}"
          src="{{ url_for('static', filename='images/profiles_images/'+ offer.author.profile_image) }}"
          data-holder-rendered="true" data-bs-toggle="tooltip" data-bs-placement="top"
          title="{{ offer.author.username }}">
      </a>
    </span>
  </p>
</div>




{% endfor %}

<div class="pagination">
  {% for page_number in offers.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}

  {% if page_number %}

  {% if offers.page == page_number %}

  <a href="{{ url_for('offers', page=page_number) }}" class="active">{{ page_number }}</a>

  {% else %}
  <a href="{{ url_for('offers', page=page_number) }}">{{ page_number }}</a>
  {% endif %}

  {% else %}
  <span>...</span>
  {% endif %}


  {% endfor %}

</div>
{% endif %}

{% endblock content %}